const translations = {
  fr: {
    // Navigation
    dashboard: "Tableau de Bord",
    students: "Étudiants",
    teachers: "Professeurs",
    courses: "Cours",
    rooms: "Salles",
    exams: "Examens",
    logout: "Déconnexion",
    
    // Login
    login: "Se connecter",
    username: "Nom d'utilisateur",
    password: "Mot de passe",
    selectRole: "-- Sélectionnez votre rôle --",
    roleAdmin: "Administrateur",
    roleSecretariat: "Secrétariat",
    roleTeacher: "Professeur",
    roleViewer: "Consultation",
    
    // Common
    save: "Enregistrer",
    add: "Ajouter",
    modify: "Modifier",
    edit: "Modifier",
    delete: "Supprimer",
    details: "Détails",
    search: "Rechercher",
    sort: "Trier A ↔ Z",
    exportCSV: "Exporter CSV",
    exportPDF: "Exporter PDF",
    previous: "Précédent",
    next: "Suivant",
    print: "Imprimer",
    back: "Retour",
    actions: "Actions",
    id: "ID",
    page: "Page",
    
    // Students
    studentManagement: "Gestion des Étudiants",
    name: "Nom",
    email: "Email",
    class: "Classe",
    namePlaceholder: "Nom et prénom",
    emailPlaceholder: "Email",
    classPlaceholder: "Classe (ex: 1ère année)",
    searchPlaceholder: "Rechercher par nom...",
    filterByClass: "Filtrer par classe :",
    allClasses: "Toutes les classes",
    studentDetails: "Détails de l'Étudiant",
    
    // Teachers
    teacherManagement: "Gestion des Professeurs",
    teacher: "Professeur",
    subject: "Matière",
    subjectPlaceholder: "Matière enseignée",
    filterBySubject: "Filtrer par matière :",
    allSubjects: "Toutes les matières",
    teacherDetails: "Détails du Professeur",
    
    // Courses
    courseManagement: "Gestion des Cours",
    course: "Cours",
    schedule: "Horaire",
    coursePlaceholder: "Nom du cours",
    teacherPlaceholder: "Nom du professeur",
    schedulePlaceholder: "Horaire (ex: Lundi 10h-12h)",
    filterByTeacher: "Filtrer par professeur :",
    allTeachers: "Tous les professeurs",
    courseDetails: "Détails du Cours",
    courseDistribution: "Répartition des Cours par Matière",
    
    // Rooms
    roomManagement: "Gestion des Salles",
    room: "Salle",
    capacity: "Capacité",
    location: "Localisation",
    roomNamePlaceholder: "Nom/Numéro de la salle",
    capacityPlaceholder: "Capacité (ex: 30)",
    locationPlaceholder: "Localisation (ex: Bâtiment A)",
    filterByBuilding: "Filtrer par bâtiment :",
    allBuildings: "Tous les bâtiments",
    filterByCapacity: "Filtrer par capacité :",
    allCapacities: "Toutes capacités",
    smallCapacity: "Petite (< 30)",
    mediumCapacity: "Moyenne (30-50)",
    largeCapacity: "Grande (> 50)",
    roomDetails: "Détails de la Salle",
    roomCapacity: "Capacité des Salles",
    roomTypes: "Types de Salles",
    
    // Exams
    examManagement: "Gestion des Examens",
    exam: "Examen",
    date: "Date",
    datePlaceholder: "Date (ex: 15/01/2026)",
    roomPlaceholder: "Nom de la salle",
    filterByMonth: "Filtrer par mois :",
    allMonths: "Tous les mois",
    filterByCourse: "Filtrer par cours :",
    allCourses: "Tous les cours",
    examDetails: "Détails de l'Examen",
    examsByMonth: "Examens par Mois",
    
    // Months
    january: "Janvier",
    february: "Février",
    march: "Mars",
    april: "Avril",
    may: "Mai",
    june: "Juin",
    july: "Juillet",
    august: "Août",
    september: "Septembre",
    october: "Octobre",
    november: "Novembre",
    december: "Décembre",
    
    // Dashboard
    studentsByClass: "Nombre d'Étudiants par Classe",
    statistics: "Statistiques",
    advancedStats: "Statistiques Avancées",
    successRate: "Taux de Réussite",
    upcomingExams: "Examens à Venir",
    roomOccupancy: "Occupation Salles",
    studentRatio: "Ratio Étudiant/Prof",
    recentActivity: "Activité Récente",
    filterByClassDash: "Filtrer par classe :",
    filterByMonth: "Filtrer par mois :",
    
    // Messages
    confirmDelete: "Voulez-vous vraiment supprimer cet élément ?",
    deleteSuccess: "Élément supprimé avec succès",
    saveSuccess: "Enregistré avec succès",
    exportSuccess: "Exporté avec succès",
    errorOccurred: "Une erreur s'est produite",
    fillAllFields: "Veuillez remplir tous les champs",
    invalidEmail: "Email invalide",
    
    // Years/Classes
    firstYear: "1ère année",
    secondYear: "2ème année",
    thirdYear: "3ème année",
    
    // Subjects
    math: "Mathématiques",
    physics: "Physique",
    computer: "Informatique",
    french: "Français",
    history: "Histoire",
    chemistry: "Chimie",
    
    // Buildings
    buildingA: "Bâtiment A",
    buildingB: "Bâtiment B",
    buildingC: "Bâtiment C",
    buildingD: "Bâtiment D",
    mainBuilding: "Bâtiment Principal",
    
    // Other
    schoolManagementSystem: "Système de Gestion Scolaire",
    generatedOn: "Généré le",
    copyright: "Tous droits réservés"
    
  },
  
  en: {
    // Navigation
    dashboard: "Dashboard",
    students: "Students",
    teachers: "Teachers",
    courses: "Courses",
    rooms: "Rooms",
    exams: "Exams",
    logout: "Logout",
    
    // Login
    login: "Login",
    username: "Username",
    password: "Password",
    selectRole: "-- Select your role --",
    roleAdmin: "Administrator",
    roleSecretariat: "Secretary",
    roleTeacher: "Teacher",
    roleViewer: "Viewer",
    
    // Common
    save: "Save",
    add: "Add",
    modify: "Modify",
    edit: "Edit",
    delete: "Delete",
    details: "Details",
    search: "Search",
    sort: "Sort A ↔ Z",
    exportCSV: "Export CSV",
    exportPDF: "Export PDF",
    previous: "Previous",
    next: "Next",
    print: "Print",
    back: "Back",
    actions: "Actions",
    id: "ID",
    page: "Page",
    
    // Students
    studentManagement: "Student Management",
    name: "Name",
    email: "Email",
    class: "Class",
    namePlaceholder: "Full name",
    emailPlaceholder: "Email address",
    classPlaceholder: "Class (e.g., 1st year)",
    searchPlaceholder: "Search by name...",
    filterByClass: "Filter by class:",
    allClasses: "All classes",
    studentDetails: "Student Details",
    
    // Teachers
    teacherManagement: "Teacher Management",
    teacher: "Teacher",
    subject: "Subject",
    subjectPlaceholder: "Subject taught",
    filterBySubject: "Filter by subject:",
    allSubjects: "All subjects",
    teacherDetails: "Teacher Details",
    
    // Courses
    courseManagement: "Course Management",
    course: "Course",
    schedule: "Schedule",
    coursePlaceholder: "Course name",
    teacherPlaceholder: "Teacher name",
    schedulePlaceholder: "Schedule (e.g., Monday 10am-12pm)",
    filterByTeacher: "Filter by teacher:",
    allTeachers: "All teachers",
    courseDetails: "Course Details",
    courseDistribution: "Course Distribution by Subject",
    
    // Rooms
    roomManagement: "Room Management",
    room: "Room",
    capacity: "Capacity",
    location: "Location",
    roomNamePlaceholder: "Room name/number",
    capacityPlaceholder: "Capacity (e.g., 30)",
    locationPlaceholder: "Location (e.g., Building A)",
    filterByBuilding: "Filter by building:",
    allBuildings: "All buildings",
    filterByCapacity: "Filter by capacity:",
    allCapacities: "All capacities",
    smallCapacity: "Small (< 30)",
    mediumCapacity: "Medium (30-50)",
    largeCapacity: "Large (> 50)",
    roomDetails: "Room Details",
    roomCapacity: "Room Capacity",
    roomTypes: "Room Types",
    
    // Exams
    examManagement: "Exam Management",
    exam: "Exam",
    date: "Date",
    datePlaceholder: "Date (e.g., 01/15/2026)",
    roomPlaceholder: "Room name",
    filterByMonth: "Filter by month:",
    allMonths: "All months",
    filterByCourse: "Filter by course:",
    allCourses: "All courses",
    examDetails: "Exam Details",
    examsByMonth: "Exams by Month",
    
    // Months
    january: "January",
    february: "February",
    march: "March",
    april: "April",
    may: "May",
    june: "June",
    july: "July",
    august: "August",
    september: "September",
    october: "October",
    november: "November",
    december: "December",
    
    // Dashboard
    studentsByClass: "Students by Class",
    statistics: "Statistics",
    advancedStats: "Advanced Statistics",
    successRate: "Success Rate",
    upcomingExams: "Upcoming Exams",
    roomOccupancy: "Room Occupancy",
    studentRatio: "Student/Teacher Ratio",
    recentActivity: "Recent Activity",
    filterByClassDash: "Filter by class:",
    filterByMonth: "Filter by month:",
    
    // Messages
    confirmDelete: "Do you really want to delete this item?",
    deleteSuccess: "Item deleted successfully",
    saveSuccess: "Saved successfully",
    exportSuccess: "Exported successfully",
    errorOccurred: "An error occurred",
    fillAllFields: "Please fill in all fields",
    invalidEmail: "Invalid email",
    
    // Years/Classes
    firstYear: "1st year",
    secondYear: "2nd year",
    thirdYear: "3rd year",
    
    // Subjects
    math: "Mathematics",
    physics: "Physics",
    computer: "Computer Science",
    french: "French",
    history: "History",
    chemistry: "Chemistry",
    
    // Buildings
    buildingA: "Building A",
    buildingB: "Building B",
    buildingC: "Building C",
    buildingD: "Building D",
    mainBuilding: "Main Building",
    
    // Other
    schoolManagementSystem: "School Management System",
    generatedOn: "Generated on",
    copyright: "All rights reserved"
  },
  
  ar: {
    // Navigation
    dashboard: "لوحة التحكم",
    students: "الطلاب",
    teachers: "الأساتذة",
    courses: "الدروس",
    rooms: "القاعات",
    exams: "الامتحانات",
    logout: "تسجيل الخروج",
    
    // Login
    login: "تسجيل الدخول",
    username: "اسم المستخدم",
    password: "كلمة المرور",
    selectRole: "-- اختر دورك --",
    roleAdmin: "مدير",
    roleSecretariat: "سكرتارية",
    roleTeacher: "أستاذ",
    roleViewer: "مشاهد",
    
    // Common
    save: "حفظ",
    add: "إضافة",
    modify: "تعديل",
    edit: "تعديل",
    delete: "حذف",
    details: "التفاصيل",
    search: "بحث",
    sort: "ترتيب أ ↔ ي",
    exportCSV: "تصدير CSV",
    exportPDF: "تصدير PDF",
    previous: "السابق",
    next: "التالي",
    print: "طباعة",
    back: "رجوع",
    actions: "إجراءات",
    id: "المعرف",
    page: "صفحة",
    
    // Students
    studentManagement: "إدارة الطلاب",
    name: "الاسم",
    email: "البريد الإلكتروني",
    class: "الفصل",
    namePlaceholder: "الاسم الكامل",
    emailPlaceholder: "البريد الإلكتروني",
    classPlaceholder: "الفصل (مثال: السنة الأولى)",
    searchPlaceholder: "البحث بالاسم...",
    filterByClass: "تصفية حسب الفصل:",
    allClasses: "جميع الفصول",
    studentDetails: "تفاصيل الطالب",
    
    // Teachers
    teacherManagement: "إدارة الأساتذة",
    teacher: "الأستاذ",
    subject: "المادة",
    subjectPlaceholder: "المادة المدرسة",
    filterBySubject: "تصفية حسب المادة:",
    allSubjects: "جميع المواد",
    teacherDetails: "تفاصيل الأستاذ",
    
    // Courses
    courseManagement: "إدارة الدروس",
    course: "الدرس",
    schedule: "الجدول",
    coursePlaceholder: "اسم الدرس",
    teacherPlaceholder: "اسم الأستاذ",
    schedulePlaceholder: "الجدول (مثال: الإثنين 10-12)",
    filterByTeacher: "تصفية حسب الأستاذ:",
    allTeachers: "جميع الأساتذة",
    courseDetails: "تفاصيل الدرس",
    courseDistribution: "توزيع الدروس حسب المادة",
    
    // Rooms
    roomManagement: "إدارة القاعات",
    room: "القاعة",
    capacity: "السعة",
    location: "الموقع",
    roomNamePlaceholder: "اسم/رقم القاعة",
    capacityPlaceholder: "السعة (مثال: 30)",
    locationPlaceholder: "الموقع (مثال: المبنى أ)",
    filterByBuilding: "تصفية حسب المبنى:",
    allBuildings: "جميع المباني",
    filterByCapacity: "تصفية حسب السعة:",
    allCapacities: "جميع السعات",
    smallCapacity: "صغيرة (< 30)",
    mediumCapacity: "متوسطة (30-50)",
    largeCapacity: "كبيرة (> 50)",
    roomDetails: "تفاصيل القاعة",
    roomCapacity: "سعة القاعات",
    roomTypes: "أنواع القاعات",
    
    // Exams
    examManagement: "إدارة الامتحانات",
    exam: "الامتحان",
    date: "التاريخ",
    datePlaceholder: "التاريخ (مثال: 15/01/2026)",
    roomPlaceholder: "اسم القاعة",
    filterByMonth: "تصفية حسب الشهر:",
    allMonths: "جميع الأشهر",
    filterByCourse: "تصفية حسب الدرس:",
    allCourses: "جميع الدروس",
    examDetails: "تفاصيل الامتحان",
    examsByMonth: "الامتحانات حسب الشهر",
    
    // Months
    january: "يناير",
    february: "فبراير",
    march: "مارس",
    april: "أبريل",
    may: "مايو",
    june: "يونيو",
    july: "يوليو",
    august: "أغسطس",
    september: "سبتمبر",
    october: "أكتوبر",
    november: "نوفمبر",
    december: "ديسمبر",
    
    // Dashboard
    studentsByClass: "عدد الطلاب حسب الفصل",
    statistics: "إحصائيات",
    advancedStats: "إحصائيات متقدمة",
    successRate: "معدل النجاح",
    upcomingExams: "امتحانات قادمة",
    roomOccupancy: "إشغال القاعات",
    studentRatio: "نسبة الطالب/الأستاذ",
    recentActivity: "النشاط الأخير",
    filterByClassDash: "تصفية حسب الفصل:",
    filterByMonth: "تصفية حسب الشهر:",
    
    // Messages
    confirmDelete: "هل تريد حقا حذف هذا العنصر؟",
    deleteSuccess: "تم الحذف بنجاح",
    saveSuccess: "تم الحفظ بنجاح",
    exportSuccess: "تم التصدير بنجاح",
    errorOccurred: "حدث خطأ",
    fillAllFields: "يرجى ملء جميع الحقول",
    invalidEmail: "بريد إلكتروني غير صالح",
    
    // Years/Classes
    firstYear: "السنة الأولى",
    secondYear: "السنة الثانية",
    thirdYear: "السنة الثالثة",
    
    // Subjects
    math: "الرياضيات",
    physics: "الفيزياء",
    computer: "المعلوميات",
    french: "الفرنسية",
    history: "التاريخ",
    chemistry: "الكيمياء",
    
    // Buildings
    buildingA: "المبنى أ",
    buildingB: "المبنى ب",
    buildingC: "المبنى ج",
    buildingD: "المبنى د",
    mainBuilding: "المبنى الرئيسي",
    
    // Other
    schoolManagementSystem: "نظام إدارة المدارس",
    generatedOn: "تم إنشاؤه في",
    copyright: "جميع الحقوق محفوظة"
  }
};

// Langue par défaut
let currentLang = localStorage.getItem('lang') || 'fr';

// Fonction pour changer la langue
function changeLang(lang) {
  currentLang = lang;
  localStorage.setItem('lang', lang);
  
  // Mettre à jour l'attribut HTML
  document.documentElement.setAttribute('lang', lang);
  
  // Mettre à jour la direction RTL pour l'arabe
  if (lang === 'ar') {
    document.documentElement.setAttribute('dir', 'rtl');
    document.body.setAttribute('dir', 'rtl');
  } else {
    document.documentElement.setAttribute('dir', 'ltr');
    document.body.setAttribute('dir', 'ltr');
  }
  
  // Appliquer les traductions
  applyTranslations();
  
  // Mettre à jour le select
  const selects = document.querySelectorAll('select');
  selects.forEach(select => {
    if (select.onchange && select.onchange.toString().includes('changeLang')) {
      select.value = lang;
    }
  });
}

// Fonction pour appliquer les traductions
function applyTranslations() {
  // Traduire les éléments avec data-i18n
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (translations[currentLang] && translations[currentLang][key]) {
      el.textContent = translations[currentLang][key];
    }
  });
  
  // Traduire les placeholders avec data-i18n-placeholder
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (translations[currentLang] && translations[currentLang][key]) {
      el.placeholder = translations[currentLang][key];
    }
  });
  
  // Traduire les valeurs d'options avec data-i18n-value
  document.querySelectorAll('[data-i18n-value]').forEach(el => {
    const key = el.getAttribute('data-i18n-value');
    if (translations[currentLang] && translations[currentLang][key]) {
      el.textContent = translations[currentLang][key];
    }
  });
  
  // Traduire les titres avec data-i18n-title
  document.querySelectorAll('[data-i18n-title]').forEach(el => {
    const key = el.getAttribute('data-i18n-title');
    if (translations[currentLang] && translations[currentLang][key]) {
      el.setAttribute('title', translations[currentLang][key]);
    }
  });
}

// Fonction pour obtenir une traduction
function t(key) {
  return translations[currentLang]?.[key] || key;
}

// Initialiser la langue au chargement de la page
document.addEventListener('DOMContentLoaded', () => {
  changeLang(currentLang);
});

// Exporter les fonctions pour utilisation globale
if (typeof window !== 'undefined') {
  window.changeLang = changeLang;
  window.applyTranslations = applyTranslations;
  window.translations = translations;
  window.getCurrentLang = () => currentLang;
  window.t = t;
}

console.log(' Système de traduction complet chargé (FR/EN/AR)');